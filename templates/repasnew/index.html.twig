{% extends 'base.html.twig' %}

{% block title %}New Repas
{% endblock %}

{% block stylesheets %}
	<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text></svg>">
	{# Run `composer require symfony/webpack-encore-bundle` to start using Symfony UX #}

	<!-- Font Awesome -->
	<link
	rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer"/> <!-- JQuery -->
	<link
	href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet"/>

	<!-- Axentix CSS minified version -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/axentix@2.3.0/dist/axentix.min.css">
	{{ encore_entry_link_tags('app') }}

	<link rel="stylesheet" href="{{asset('./assets/css/style.css')}}">
	<link rel="stylesheet" href="{{asset('./assets/css/baseStyle.css')}}">
	<link rel="stylesheet" href="{{asset('./assets/css/repas/repasNewEditStyle.css')}}">

{% endblock %}

{% block body %}

	<section class="entete">
		<div>
			<a class="btn btnRetour" href="javascript:history.go(-1)">Retour</a>
		</div>
	</section>
	<section class="amis">
		<h2>Amis invités</h2>
{% if amisPresents %}

		<h3>amis</h3>
		<ul>
			{% for ami in amisPresents %}
				<li>
					<p>
						{{ami.prenom}}
					</p>
					<ul>
						{% for allergieAliment in ami.allergiesAliment %}
							<li>{{allergieAliment.id}} - {{allergieAliment.aliment}}</li>
						{% endfor %}
					</ul>
				</li>
			{% endfor %}
		</ul>


{% else %}
	
<form method="POST">
			<ul>
				{% for famille in familles | sort ((a, b)=> a.nom <=> b.nom) %}
					<li><input onclick='handleClick(this);' type="checkbox" id="{{ famille.nom }}" class="main-checkbox" name="familleAmisPourRecettes[]" value="{{ famille.id }}" data-dependant="{% for ami in famille.amis %}{{ami.id}},{% endfor %}">
						<label for="{{ famille.nom }}">Famille
							{{ famille.nom }}</label>
						<ul>
							{% for ami in famille.amis %}
								<li><input type="checkbox" id="{{ ami.prenom }}" name="amisPourRecettes[]" class="famille{{ famille.nom }}" value="{{ ami.id }}">
									<label for="{{ ami.prenom }}">{{ ami.prenom }}</label>
								</li>
							{% endfor %}
						</ul>
					</li>
				{% endfor %}
			</ul>
			<input type="submit" value="Liste des recettes" name="submit" class="btn btnValider">

		</form>

	{% endif %}
	
	</section>

	<section class="recettes">
		<h2>Recettes possibles</h2>

		<form method="POST">
			<ul>
				{% for recette in recettes  | sort((a, b)=> a.titre <=> b.titre) %}
					<div class="card shadow-1 hoverable-1 rounded-3 ">
						<div
							class="cardRecette">

							{# {% if recette.photo %}
																					<div class="imgRecette">
																						<a href="{{ path('app_recette_show', {'id': recette.id}) }}"><img src="{{asset('assets/uploads/photosRecettes/mini/')}}{{ recette.photo }}" alt="{{ recette.titre }}"></a>
																					</div>
																				{% else  %}
																					<div class="imgRecette">
																						<a href="{{ path('app_recette_show', {'id': recette.id}) }}"><img src="{{asset('./assets/img/recette.jpg')}}" alt="{{ recette.titre }}"></a>
																					</div>
																				{% endif  %} #}

							<div class="slugRecette">
								<div class="titreRecette">
									<a href="{{ path('app_recette_show', {'id': recette.id}) }}">
										<h3>{{ recette.titre }}</h3>
									</a>
								</div>
								<div class="tpsRecette">
									<div>
										<div>Préparation</div>
										<div>{{ recette.tpsPreparation }}
											min</div>
									</div>
									<div>
										<div>Repos</div>
										<div>{{ recette.tpsRepos }}
											min</div>
									</div>
									<div>
										<div>Cuisson</div>
										<div>{{ recette.tpsCuisson }}
											min</div>
									</div>

								</div>
								{# <div>{{ recette.saison }}</div> #}

								{# <a href="{{ path('app_repas_new', {'recetteId': recette.id, 'amisId': amisId}) }}" class="btn btnValider">Choisir</a> #}

							</div>

						</div>
					</div>
				{% else %}
					<div>Aucune recette ne correspond...</div>
				{% endfor %}
			</ul>
			<input type="submit" value="Chercher" name="submit" class="btn btnValider">
		</form>

	</section>


{% endblock %}
{% block javascripts %}
	<script src="{{asset('assets/js/repasNew.js')}}"></script>
{% endblock %}
